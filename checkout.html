<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - YTime Luxury</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
:root {
    --primary-color: #000000;
    --secondary-color: #0a3d62;
    --accent-color: #d4af37;
    --light-color: #f5f5f5;
    --dark-color: #222;
    --gray-color: #eaeaea;
    --text-color: #333;
    --gold-gradient: linear-gradient(135deg, #d4af37 0%, #f2d87a 50%, #d4af37 100%);
    --blue-black-gradient: linear-gradient(135deg, #0a3d62 0%, #000000 100%);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Arial', sans-serif;
    scroll-behavior: smooth;
}

body {
    background-color: #f9f9f9;
    color: var(--text-color);
    line-height: 1.6;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: var(--dark-color);
}

::-webkit-scrollbar-thumb {
    background: var(--accent-color);
    border-radius: 5px;
    transition: all 0.3s;
}

::-webkit-scrollbar-thumb:hover {
    background: #c19b2a;
}

.container {
    width: 90%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 15px;
}

/* Navigation Styles */
.navbar {
    background-color: var(--primary-color);
    color: white;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.navbar-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 0;
}

.logo {
    display: flex;
    align-items: center;
    transition: transform 0.3s ease;
}

.logo:hover {
    transform: scale(1.05);
}

.logo img {
    height: 40px;
    margin-right: 10px;
    filter: drop-shadow(0 0 3px rgba(212, 175, 55, 0.5));
}

.logo-text {
    font-size: 24px;
    font-weight: bold;
    color: var(--accent-color);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.hamburger {
    display: none;
    flex-direction: column;
    cursor: pointer;
}

.hamburger span {
    width: 25px;
    height: 3px;
    background-color: var(--accent-color);
    margin: 3px 0;
    transition: 0.4s;
    border-radius: 2px;
}

.hamburger:hover span {
    background-color: #c19b2a;
}

.nav-links {
    display: flex;
    list-style-type: none;
}

.nav-link {
    color: white;
    text-decoration: none;
    margin: 0 15px;
    font-weight: 500;
    transition: all 0.3s;
    position: relative;
    padding: 5px 0;
}

.nav-link:hover {
    color: var(--accent-color);
}

.nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: var(--accent-color);
    transition: width 0.3s ease;
}

.nav-link:hover::after {
    width: 100%;
}

.nav-icons-container {
    display: flex;
    align-items: center;
}

.cart-icon {
    position: relative;
    margin-right: 20px;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.cart-icon:hover {
    transform: scale(1.1);
}

.cart-icon i {
    color: var(--accent-color);
    font-size: 20px;
}

.cart-count {
    position: absolute;
    top: -10px;
    right: -10px;
    background: var(--gold-gradient);
    color: var(--primary-color);
    font-size: 12px;
    height: 18px;
    width: 18px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.auth-button {
    background: var(--gold-gradient);
    color: var(--primary-color);
    border: none;
    padding: 10px 18px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.auth-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.auth-button:active {
    transform: translateY(1px);
}

/* Checkout Styles */
.checkout-section {
    padding: 40px 0;
    animation: fadeIn 0.8s ease;
}

.checkout-title {
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 30px;
    text-align: center;
    color: var(--accent-color);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    position: relative;
    padding-bottom: 15px;
}

.checkout-title::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 3px;
    background: var(--gold-gradient);
    border-radius: 2px;
}

.checkout-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
}

.checkout-left, .checkout-right {
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
    padding: 25px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.checkout-left:hover, .checkout-right:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 25px rgba(0, 0, 0, 0.12);
}

.section-title {
    font-size: 22px;
    font-weight: 600;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--gray-color);
    color: var(--secondary-color);
    position: relative;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 60px;
    height: 2px;
    background-color: var(--accent-color);
}

/* Cart Items */
.cart-items {
    margin-bottom: 30px;
}

.cart-item {
    display: flex;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--gray-color);
    transition: transform 0.3s ease;
}

.cart-item:hover {
    transform: translateX(5px);
}

.cart-item-image {
    width: 80px;
    height: 80px;
    object-fit: cover;
    margin-right: 15px;
    border-radius: 4px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
}

.cart-item:hover .cart-item-image {
    transform: scale(1.05);
}

.cart-item-details {
    flex: 1;
}

.cart-item-title {
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--secondary-color);
}

.cart-item-price {
    font-weight: 700;
    color: var(--accent-color);
}

.cart-item-quantity {
    color: #777;
    font-size: 14px;
}

.cart-item-remove {
    color: #e74c3c;
    cursor: pointer;
    margin-left: 10px;
    background: none;
    border: none;
    font-size: 16px;
    transition: transform 0.3s ease, color 0.3s ease;
}

.cart-item-remove:hover {
    color: #c0392b;
    transform: scale(1.1);
}

/* Customer Info */
.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--secondary-color);
}

.form-input {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 16px;
    transition: all 0.3s ease;
}

.form-input:focus {
    border-color: var(--accent-color);
    outline: none;
    box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.2);
}

/* Delivery Options */
.delivery-options {
    margin-bottom: 30px;
}

.delivery-option {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.delivery-option:hover {
    border-color: var(--accent-color);
    transform: translateX(5px);
}

.delivery-option.selected {
    border-color: var(--accent-color);
    background-color: rgba(212, 175, 55, 0.05);
    box-shadow: 0 2px 8px rgba(212, 175, 55, 0.2);
}

.delivery-radio {
    margin-right: 15px;
    accent-color: var(--accent-color);
}

.delivery-details {
    flex: 1;
}

.delivery-title {
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--secondary-color);
}

.delivery-description {
    font-size: 14px;
    color: #777;
}

.delivery-price {
    font-weight: 700;
    color: var(--accent-color);
}

/* Auth Frame */
.auth-frame-container {
    margin-bottom: 30px;
}

.auth-frame {
    width: 100%;
    height: 200px;
    border: none;
    background-color: var(--gray-color);
    border-radius: 4px;
    transition: box-shadow 0.3s ease;
}

.auth-frame:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Auth Alternatives */
.auth-alternatives {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
}

.auth-button-social {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #fff;
    border: 1px solid #ddd;
    padding: 12px;
    margin: 0 5px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.auth-button-social:hover {
    background-color: #f5f5f5;
    transform: translateY(-3px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    border-color: var(--accent-color);
}

.auth-button-social i {
    margin-right: 8px;
    color: var(--secondary-color);
}

/* Agreement Section */
.agreement {
    margin-bottom: 20px;
}

.agreement label {
    display: flex;
    align-items: center;
    transition: color 0.3s ease;
}

.agreement label:hover {
    color: var(--secondary-color);
}

.agreement input {
    margin-right: 10px;
    accent-color: var(--accent-color);
}

/* Order Summary */
.order-summary {
    margin-top: 20px;
}

.summary-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    font-size: 16px;
    transition: transform 0.3s ease;
}

.summary-row:hover {
    transform: translateX(5px);
}

.summary-total {
    font-size: 20px;
    font-weight: 700;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid var(--gray-color);
    color: var(--secondary-color);
}

.summary-total .summary-value {
    color: var(--accent-color);
}

/* Payment Methods */
.payment-methods {
    margin-top: 30px;
}

.payment-method {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.payment-method:hover {
    border-color: var(--accent-color);
    transform: translateX(5px);
}

.payment-method.selected {
    border-color: var(--accent-color);
    background-color: rgba(212, 175, 55, 0.05);
    box-shadow: 0 2px 8px rgba(212, 175, 55, 0.2);
}

.payment-radio {
    margin-right: 15px;
    accent-color: var(--accent-color);
}

.payment-details {
    flex: 1;
}

.payment-title {
    font-weight: 600;
    display: flex;
    align-items: center;
    color: var(--secondary-color);
}

.payment-title i {
    margin-right: 8px;
    color: var(--accent-color);
}

.payment-description {
    font-size: 14px;
    color: #777;
    margin-top: 5px;
}

/* Checkout Button */
.checkout-button {
    width: 100%;
    background: var(--gold-gradient);
    color: var(--primary-color);
    border: none;
    padding: 15px;
    font-size: 18px;
    font-weight: 700;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 20px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.checkout-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
}

.checkout-button:active {
    transform: translateY(1px);
}

.checkout-button:disabled {
    background: #cccccc;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

/* Empty Cart */
.empty-cart {
    text-align: center;
    padding: 60px 0;
    animation: fadeIn 1s ease;
}

.empty-cart i {
    font-size: 50px;
    color: var(--accent-color);
    margin-bottom: 20px;
    animation: pulse 2s infinite;
}

.empty-cart h3 {
    font-size: 24px;
    margin-bottom: 15px;
    color: var(--secondary-color);
}

.empty-cart p {
    margin-bottom: 30px;
    color: #777;
}

.continue-shopping {
    background: var(--gold-gradient);
    color: var(--primary-color);
    padding: 12px 25px;
    border: none;
    border-radius: 4px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    display: inline-block;
    text-decoration: none;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.continue-shopping:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
}

.continue-shopping:active {
    transform: translateY(1px);
}

/* Footer Styles */
.footer {
    background-color: var(--primary-color);
    color: white;
    padding: 60px 0 20px;
}

.footer-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 30px;
    margin-bottom: 40px;
}

.footer-logo {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    transition: transform 0.3s ease;
}

.footer-logo:hover {
    transform: scale(1.05);
}

.footer-logo img {
    height: 40px;
    margin-right: 10px;
    filter: drop-shadow(0 0 3px rgba(212, 175, 55, 0.5));
}

.footer-about {
    margin-bottom: 20px;
    line-height: 1.8;
    font-size: 14px;
}

.footer-social {
    display: flex;
    gap: 15px;
}

.social-icon {
    width: 36px;
    height: 36px;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--accent-color);
    text-decoration: none;
    transition: all 0.3s;
    overflow: hidden;
    position: relative;
}

.social-icon::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--gold-gradient);
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 0;
}

.social-icon:hover::before {
    opacity: 1;
}

.social-icon:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    color: var(--primary-color);
}

.social-icon i {
    position: relative;
    z-index: 1;
}

.footer-heading {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 20px;
    position: relative;
    color: var(--accent-color);
}

.footer-heading::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -10px;
    width: 40px;
    height: 2px;
    background-color: var(--accent-color);
}

.footer-links {
    list-style-type: none;
}

.footer-links li {
    margin-bottom: 10px;
    transition: transform 0.3s ease;
}

.footer-links li:hover {
    transform: translateX(5px);
}

.footer-links a {
    color: #ccc;
    text-decoration: none;
    transition: color 0.3s;
    position: relative;
    padding-left: 15px;
}

.footer-links a::before {
    content: '›';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    color: var(--accent-color);
    opacity: 0;
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.footer-links a:hover {
    color: var(--accent-color);
}

.footer-links a:hover::before {
    opacity: 1;
    transform: translateY(-50%) translateX(3px);
}

.footer-contact-item {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    transition: transform 0.3s ease;
}

.footer-contact-item:hover {
    transform: translateX(5px);
}

.footer-contact-item i {
    width: 25px;
    color: var(--accent-color);
}

.footer-bottom {
    text-align: center;
    padding-top: 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    font-size: 14px;
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes pulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1);
    }
    100% {
        transform: scale(1);
    }
}

/* Page Transition Animation */
.page-transition {
    animation: fadeIn 0.8s ease;
}

/* Hover Animation for Buttons */
.btn-hover-effect {
    position: relative;
    overflow: hidden;
}

.btn-hover-effect::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.2);
    transition: left 0.3s ease;
}

.btn-hover-effect:hover::before {
    left: 100%;
}

/* Media Queries */
@media (max-width: 992px) {
    .checkout-container {
        grid-template-columns: 1fr;
    }

    .footer-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .hamburger {
        display: flex;
    }

    .nav-links {
        position: absolute;
        flex-direction: column;
        background-color: var(--primary-color);
        width: 100%;
        top: 70px;
        left: 0;
        padding: 20px 0;
        transform: translateY(-150%);
        transition: transform 0.3s;
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
    }

    .nav-links.active {
        transform: translateY(0);
    }

    .nav-links li {
        margin: 10px 0;
    }

    .nav-link {
        margin: 0;
        padding: 10px 20px;
        display: block;
    }

    .footer-grid {
        grid-template-columns: 1fr;
    }
}
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container navbar-container">
            <div class="logo">
                <img src="ytime_luxury-removebg-preview.png" alt="YTime Logo">
                <span class="logo-text">YTime</span>
            </div>

            <div class="hamburger">
                <span></span>
                <span></span>
            </div>

            <ul class="nav-links">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="shop.html" class="nav-link">Collection</a></li>
                <li><a href="service.html" class="nav-link">Services</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>

            <div class="nav-icons-container">
                <div class="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </div>
                <div class="nav-auth-container">
                    <button id="authButton" class="auth-button">Sign In</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Checkout Section -->
    <section class="checkout-section">
        <div class="container">
            <h1 class="checkout-title">Checkout</h1>
            
            <div id="emptyCartMessage" class="empty-cart" style="display: none;">
                <i class="fas fa-shopping-cart"></i>
                <h3>Your cart is empty</h3>
                <p>Looks like you haven't added any watches to your cart yet.</p>
                <a href="shop.html" class="continue-shopping">Continue Shopping</a>
            </div>

            <div id="checkoutContainer" class="checkout-container">
                <div class="checkout-left">
                    <div class="cart-items">
                        <h2 class="section-title">Your Cart</h2>
                        <div id="cartItemsContainer">
                            <!-- Cart items will be populated here -->
                        </div>
                    </div>

                    <div class="customer-info">
                        <h2 class="section-title">Personal Information</h2>
                        <div class="form-group">
                            <label for="fullName" class="form-label">Full Name</label>
                            <input type="text" id="fullName" class="form-input" placeholder="Enter your full name" required>
                        </div>
                        <div class="form-group">
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" id="email" class="form-input" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone" class="form-label">Mobile Number</label>
                            <input type="tel" id="phone" class="form-input" placeholder="Enter your mobile number" required>
                        </div>
                    </div>

                    <div class="delivery-options">
                        <h2 class="section-title">Delivery Options</h2>
                        <div class="delivery-option selected" data-fee="0" data-location="nairobi">
                            <input type="radio" name="delivery" id="nairobi" class="delivery-radio" checked>
                            <div class="delivery-details">
                                <div class="delivery-title">Nairobi County</div>
                                <div class="delivery-description">Free delivery within Nairobi</div>
                            </div>
                            <div class="delivery-price">Free</div>
                        </div>
                        <div class="delivery-option" data-fee="300" data-location="kenya">
                            <input type="radio" name="delivery" id="kenya" class="delivery-radio">
                            <div class="delivery-details">
                                <div class="delivery-title">Other Counties in Kenya</div>
                                <div class="delivery-description">Delivery to any other county in Kenya</div>
                            </div>
                            <div class="delivery-price">KES 300</div>
                        </div>
                        <div class="delivery-option" data-fee="1000" data-location="eastafrica">
                            <input type="radio" name="delivery" id="eastafrica" class="delivery-radio">
                            <div class="delivery-details">
                                <div class="delivery-title">East Africa Countries</div>
                                <div class="delivery-description">Delivery to Tanzania, Uganda, Rwanda, Burundi</div>
                            </div>
                            <div class="delivery-price">KES 1,000</div>
                        </div>
                    </div>

                    <div class="auth-frame-container">
                        <h2 class="section-title">Login Information</h2>
                        <div class="auth-alternatives">
                            <button class="auth-button-social">
                                <i class="fab fa-google"></i> Login with Google
                            </button>
                            <button class="auth-button-social">
                                <i class="fab fa-apple"></i> Login with Apple
                            </button>
                        </div>
                        <!-- Uncomment this to use iframe for login
                        <iframe src="login.html" class="auth-frame" title="Login Frame"></iframe>
                        -->
                    </div>

                    <div class="agreement">
                        <label>
                            <input type="checkbox" id="termsAgreement">
                            I agree to the <a href="#">Terms & Conditions</a> and <a href="#">Privacy Policy</a>
                        </label>
                    </div>
                </div>

                <div class="checkout-right">
                    <div class="order-summary">
                        <h2 class="section-title">Order Summary</h2>
                        <div class="summary-row">
                            <span>Subtotal</span>
                            <span id="subtotal">KES 0</span>
                        </div>
                        <div class="summary-row">
                            <span>Shipping</span>
                            <span id="shipping">KES 0</span>
                        </div>
                        <div class="summary-total">
                            <span>Total</span>
                            <span id="orderTotal">KES 0</span>
                        </div>
                    </div>

                    <div class="payment-methods">
                        <h2 class="section-title">Payment Method</h2>
                        <div class="payment-method selected" data-method="mpesa">
                            <input type="radio" name="payment" id="mpesa" class="payment-radio" checked>
                            <div class="payment-details">
                                <div class="payment-title"><i class="fas fa-mobile-alt"></i> M-Pesa STK Push</div>
                                <div class="payment-description">Pay using M-Pesa STK Push (Coming Soon)</div>
                            </div>
                        </div>
                        <div class="payment-method" data-method="whatsapp">
                            <input type="radio" name="payment" id="whatsapp" class="payment-radio">
                            <div class="payment-details">
                                <div class="payment-title"><i class="fab fa-whatsapp"></i> WhatsApp</div>
                                <div class="payment-description">Continue on WhatsApp to complete your purchase</div>
                            </div>
                        </div>
                    </div>

                    <button id="checkoutButton" class="checkout-button" disabled>Complete Purchase</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" id="contact">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <div class="footer-logo">
                        <img src="ytime_luxury-removebg-preview.png" alt="YTime Logo">
                        <span class="logo-text">YTime</span>
                    </div>
                    <p class="footer-about">
                        YTime is a premier destination for luxury timepieces, offering a curated selection of the world's finest watches and exceptional customer service.
                    </p>
                    <div class="footer-social">
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>

                <div>
                    <h3 class="footer-heading">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#collection">Collection</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="footer-heading">Help & Support</h3>
                    <ul class="footer-links">
                        <li><a href="#">FAQs</a></li>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Returns Policy</a></li>
                        <li><a href="#">Warranty</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="footer-heading">Contact Us</h3>
                    <div class="footer-contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Nairobi Kenya</span>
                    </div>
                    <div class="footer-contact-item">
                        <i class="fas fa-phone"></i>
                        <span>+254117278821</span>
                    </div>
                    <div class="footer-contact-item">
                        <i class="fas fa-envelope"></i>
                        <span>info@ytime.co.ke</span>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 YTime Luxury. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
    // Mobile navigation toggle
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');
    
    if (hamburger && navLinks) {
        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });
    }
    
    // IndexedDB setup
    const DB_NAME = 'ShoppingCartDB';
    const DB_VERSION = 1;
    const CART_STORE = 'cart';
    let db;
    
    function initDatabase() {
        return new Promise((resolve, reject) => {
            const request = indexedDB.open(DB_NAME, DB_VERSION);
            
            request.onerror = event => {
                console.error('IndexedDB error:', event.target.error);
                reject('Could not open IndexedDB');
            };
            
            request.onsuccess = event => {
                db = event.target.result;
                console.log('IndexedDB connection opened successfully');
                resolve(db);
            };
            
            request.onupgradeneeded = event => {
                const db = event.target.result;
                console.log('Creating object store for cart items');
                
                // Create object store for cart items if it doesn't exist
                if (!db.objectStoreNames.contains(CART_STORE)) {
                    const store = db.createObjectStore(CART_STORE, { keyPath: 'id' });
                    store.createIndex('id', 'id', { unique: true });
                }
            };
        });
    }
    
    // Get cart items from IndexedDB
    function getCartItems() {
        return new Promise((resolve, reject) => {
            if (!db) {
                console.error('Database not initialized');
                resolve([]);
                return;
            }
            
            try {
                const transaction = db.transaction(CART_STORE, 'readonly');
                const store = transaction.objectStore(CART_STORE);
                const request = store.getAll();
                
                request.onsuccess = () => {
                    const cartItems = request.result || [];
                    console.log('Retrieved cart items:', cartItems);
                    resolve(cartItems);
                };
                
                request.onerror = event => {
                    console.error('Error getting cart items:', event.target.error);
                    resolve([]);
                };
                
                transaction.onerror = event => {
                    console.error('Transaction error when getting cart items:', event.target.error);
                    resolve([]);
                };
            } catch (error) {
                console.error('Error in getCartItems:', error);
                resolve([]);
            }
        });
    }
    
    // Save cart items to IndexedDB
    function saveCartItem(item) {
        return new Promise((resolve, reject) => {
            if (!db) {
                console.error('Database not initialized');
                resolve(false);
                return;
            }
            
            try {
                // Validate item
                if (!item || typeof item !== 'object') {
                    console.error('Invalid item:', item);
                    resolve(false);
                    return;
                }
                
                if (!item.id || !item.name || isNaN(item.price) || isNaN(item.quantity)) {
                    console.error('Item missing required properties:', item);
                    resolve(false);
                    return;
                }
                
                const transaction = db.transaction(CART_STORE, 'readwrite');
                const store = transaction.objectStore(CART_STORE);
                const request = store.put(item);
                
                request.onsuccess = () => {
                    console.log('Item saved successfully:', item);
                    resolve(true);
                };
                
                request.onerror = event => {
                    console.error('Error saving item:', event.target.error);
                    resolve(false);
                };
                
                transaction.onerror = event => {
                    console.error('Transaction error when saving item:', event.target.error);
                    resolve(false);
                };
            } catch (error) {
                console.error('Error in saveCartItem:', error);
                resolve(false);
            }
        });
    }
    
    // Remove item from cart
    function removeCartItemById(id) {
        return new Promise((resolve, reject) => {
            if (!db) {
                console.error('Database not initialized');
                resolve(false);
                return;
            }
            
            try {
                const transaction = db.transaction(CART_STORE, 'readwrite');
                const store = transaction.objectStore(CART_STORE);
                const request = store.delete(id);
                
                request.onsuccess = () => {
                    console.log('Item removed successfully:', id);
                    resolve(true);
                };
                
                request.onerror = event => {
                    console.error('Error removing item:', event.target.error);
                    resolve(false);
                };
                
                transaction.onerror = event => {
                    console.error('Transaction error when removing item:', event.target.error);
                    resolve(false);
                };
            } catch (error) {
                console.error('Error in removeCartItemById:', error);
                resolve(false);
            }
        });
    }
    
    // Clear all cart items
    function clearCart() {
        return new Promise((resolve, reject) => {
            if (!db) {
                console.error('Database not initialized');
                resolve(false);
                return;
            }
            
            try {
                const transaction = db.transaction(CART_STORE, 'readwrite');
                const store = transaction.objectStore(CART_STORE);
                const request = store.clear();
                
                request.onsuccess = () => {
                    console.log('Cart cleared successfully');
                    resolve(true);
                };
                
                request.onerror = event => {
                    console.error('Error clearing cart:', event.target.error);
                    resolve(false);
                };
                
                transaction.onerror = event => {
                    console.error('Transaction error when clearing cart:', event.target.error);
                    resolve(false);
                };
            } catch (error) {
                console.error('Error in clearCart:', error);
                resolve(false);
            }
        });
    }
    
    // Add to cart function (for index.html and shop.html)
    function setupAddToCartButtons() {
        const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
        
        if (addToCartButtons.length > 0) {
            console.log('Found', addToCartButtons.length, 'add to cart buttons');
            
            addToCartButtons.forEach((button, index) => {
                button.addEventListener('click', function(e) {
                    e.preventDefault(); // Prevent form submission if button is in a form
                    
                    console.log('Add to cart button clicked:', index);
                    const productCard = this.closest('.product-card');
                    
                    if (!productCard) {
                        console.error('Product card not found');
                        return;
                    }
                    
                    const productId = productCard.getAttribute('data-id');
                    if (!productId) {
                        console.error('Product ID missing for product card');
                        return;
                    }
                    
                    const titleElement = productCard.querySelector('.product-title');
                    if (!titleElement) {
                        console.error('Product title element not found');
                        return;
                    }
                    const productName = titleElement.textContent.trim();
                    
                    const priceElement = productCard.querySelector('.product-price');
                    if (!priceElement) {
                        console.error('Product price element not found');
                        return;
                    }
                    const priceAttr = priceElement.getAttribute('data-price');
                    if (!priceAttr) {
                        console.error('Price attribute missing');
                        return;
                    }
                    const productPrice = parseFloat(priceAttr);
                    
                    const imageElement = productCard.querySelector('.product-image');
                    const productImage = imageElement ? imageElement.src : '';
                    
                    console.log('Adding product to cart:', {
                        id: productId,
                        name: productName,
                        price: productPrice,
                        image: productImage
                    });
                    
                    addToCart(productId, productName, productPrice, productImage);
                });
            });
        } else {
            console.log('No add to cart buttons found on page');
        }
    }
    
    // Add item to cart with validation
    async function addToCart(id, name, price, image, quantity = 1) {
        try {
            if (!id || typeof id !== 'string') {
                console.error('Invalid product ID:', id);
                return false;
            }
            
            if (!name || typeof name !== 'string') {
                console.error('Invalid product name:', name);
                return false;
            }
            
            if (isNaN(price) || price <= 0) {
                console.error('Invalid product price:', price);
                return false;
            }
            
            if (isNaN(quantity) || quantity <= 0) {
                console.error('Invalid quantity:', quantity);
                return false;
            }
            
            const cartItems = await getCartItems();
            const existingItem = cartItems.find(item => item.id === id);
            
            if (existingItem) {
                console.log('Product already in cart. Updating quantity.');
                existingItem.quantity += quantity;
                await saveCartItem(existingItem);
            } else {
                console.log('Adding new product to cart.');
                await saveCartItem({
                    id,
                    name,
                    price,
                    image,
                    quantity
                });
            }
            
            updateCartCount();
            
            // Show notification
            if (window.Swal) {
                Swal.fire({
                    title: 'Added to Cart!',
                    text: `${name} has been added to your cart.`,
                    icon: 'success',
                    timer: 2000,
                    timerProgressBar: true,
                    showConfirmButton: false
                });
            } else {
                alert(`${name} has been added to your cart.`);
            }
            
            return true;
        } catch (error) {
            console.error('Error adding to cart:', error);
            return false;
        }
    }
    
    // Update cart count in navigation
    async function updateCartCount() {
        try {
            const cartItems = await getCartItems();
            const itemCount = cartItems.length;
            
            console.log('Updating cart count to:', itemCount);
            
            const cartCountElements = document.querySelectorAll('.cart-count');
            console.log('Found', cartCountElements.length, 'cart count elements');
            
            cartCountElements.forEach(element => {
                element.textContent = itemCount.toString();
            });
        } catch (error) {
            console.error('Error updating cart count:', error);
        }
    }
    
    // Display cart items on cart page
    async function displayCartItems() {
        const cartItemsContainer = document.getElementById('cartItemsContainer');
        if (!cartItemsContainer) {
            console.log('Cart items container not found, not on cart page');
            return;
        }
        
        console.log('Displaying cart items on cart page');
        
        const cartItems = await getCartItems();
        const cartCountElement = document.querySelector('.cart-count');
        const emptyCartMessage = document.getElementById('emptyCartMessage');
        const checkoutContainer = document.getElementById('checkoutContainer');
        
        if (!cartItems || cartItems.length === 0) {
            console.log('Cart is empty, showing empty cart message');
            
            if (emptyCartMessage) {
                emptyCartMessage.style.display = 'block';
            }
            
            if (checkoutContainer) {
                checkoutContainer.style.display = 'none';
            }
            
            if (cartCountElement) {
                cartCountElement.textContent = '0';
            }
            
            cartItemsContainer.innerHTML = '';
            return;
        }
        
        console.log('Cart has items, rendering cart UI');
        
        if (cartCountElement) {
            cartCountElement.textContent = cartItems.length.toString();
        }
        
        if (emptyCartMessage) {
            emptyCartMessage.style.display = 'none';
        }
        
        if (checkoutContainer) {
            checkoutContainer.style.display = 'block';
        }
        
        let cartItemsHTML = '';
        let subtotal = 0;
        
        cartItems.forEach((item) => {
            const itemTotal = item.price * item.quantity;
            subtotal += itemTotal;
            
            cartItemsHTML += `
                <div class="cart-item" data-id="${item.id}">
                    <img src="${item.image || '/api/placeholder/80/80'}" alt="${item.name}" class="cart-item-image">
                    <div class="cart-item-details">
                        <h3 class="cart-item-title">${item.name}</h3>
                        <div class="cart-item-price">KES ${item.price.toLocaleString()}</div>
                        <div class="cart-item-controls">
                            <button class="quantity-btn decrease" data-id="${item.id}">-</button>
                            <span class="cart-item-quantity">${item.quantity}</span>
                            <button class="quantity-btn increase" data-id="${item.id}">+</button>
                        </div>
                        <div class="cart-item-total">Total: KES ${itemTotal.toLocaleString()}</div>
                    </div>
                    <button class="cart-item-remove" data-id="${item.id}">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
        });
        
        cartItemsContainer.innerHTML = cartItemsHTML;
        
        // Update order summary
        updateOrderSummary(subtotal);
        
        // Add event listeners to remove buttons
        const removeButtons = document.querySelectorAll('.cart-item-remove');
        removeButtons.forEach(button => {
            button.addEventListener('click', function() {
                const id = this.getAttribute('data-id');
                removeCartItem(id);
            });
        });
        
        // Add event listeners to quantity buttons
        const decreaseButtons = document.querySelectorAll('.quantity-btn.decrease');
        const increaseButtons = document.querySelectorAll('.quantity-btn.increase');
        
        decreaseButtons.forEach(button => {
            button.addEventListener('click', function() {
                const id = this.getAttribute('data-id');
                updateItemQuantity(id, -1);
            });
        });
        
        increaseButtons.forEach(button => {
            button.addEventListener('click', function() {
                const id = this.getAttribute('data-id');
                updateItemQuantity(id, 1);
            });
        });
    }
    
    // Update item quantity
    async function updateItemQuantity(id, change) {
        const cartItems = await getCartItems();
        const item = cartItems.find(item => item.id === id);
        if (!item) return;
        
        item.quantity += change;
        
        if (item.quantity < 1) {
            // Ask for confirmation before removing
            if (window.Swal) {
                Swal.fire({
                    title: 'Remove Item?',
                    text: `Do you want to remove ${item.name} from your cart?`,
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonText: 'Yes, remove it',
                    cancelButtonText: 'No, keep it'
                }).then((result) => {
                    if (result.isConfirmed) {
                        removeCartItem(id);
                    } else {
                        item.quantity = 1;
                        saveCartItem(item).then(() => {
                            displayCartItems();
                        });
                    }
                });
            } else {
                removeCartItem(id);
            }
        } else {
            await saveCartItem(item);
            displayCartItems();
        }
    }
    
    // Remove item from cart
    async function removeCartItem(id) {
        try {
            const cartItems = await getCartItems();
            const itemToRemove = cartItems.find(item => item.id === id);
            
            if (!itemToRemove) return;
            
            await removeCartItemById(id);
            await displayCartItems();
            updateCartCount();
            
            // Show notification
            if (window.Swal) {
                Swal.fire({
                    title: 'Item Removed',
                    text: `${itemToRemove.name} has been removed from your cart.`,
                    icon: 'info',
                    timer: 2000,
                    timerProgressBar: true,
                    showConfirmButton: false
                });
            }
        } catch (error) {
            console.error('Error removing cart item:', error);
        }
    }
    
    // Update order summary
    function updateOrderSummary(subtotal) {
        const subtotalElement = document.getElementById('subtotal');
        const shippingElement = document.getElementById('shipping');
        const orderTotalElement = document.getElementById('orderTotal');
        
        if (!subtotalElement || !shippingElement || !orderTotalElement) return;
        
        const selectedDelivery = document.querySelector('.delivery-option.selected');
        if (!selectedDelivery) return;
        
        const shippingFee = parseInt(selectedDelivery.getAttribute('data-fee')) || 0;
        
        subtotalElement.textContent = `KES ${subtotal.toLocaleString()}`;
        shippingElement.textContent = shippingFee === 0 ? 'Free' : `KES ${shippingFee.toLocaleString()}`;
        orderTotalElement.textContent = `KES ${(subtotal + shippingFee).toLocaleString()}`;
    }
    
    // Calculate subtotal
    async function calculateSubtotal() {
        try {
            const cartItems = await getCartItems();
            return cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);
        } catch (error) {
            console.error('Error calculating subtotal:', error);
            return 0;
        }
    }
    
    // Setup delivery option selection
    function setupDeliveryOptions() {
        const deliveryOptions = document.querySelectorAll('.delivery-option');
        if (deliveryOptions.length === 0) return;
        
        // Ensure at least one delivery option is selected by default
        let hasSelected = false;
        deliveryOptions.forEach(option => {
            if (option.classList.contains('selected')) {
                hasSelected = true;
            }
        });
        
        if (!hasSelected && deliveryOptions.length > 0) {
            deliveryOptions[0].classList.add('selected');
            const radio = deliveryOptions[0].querySelector('.delivery-radio');
            if (radio) radio.checked = true;
        }
        
        deliveryOptions.forEach(option => {
            option.addEventListener('click', async function() {
                // Remove selected class from all options
                deliveryOptions.forEach(opt => opt.classList.remove('selected'));
                // Add selected class to clicked option
                this.classList.add('selected');
                // Check the radio button
                const radio = this.querySelector('.delivery-radio');
                if (radio) radio.checked = true;
                // Update order summary
                const subtotal = await calculateSubtotal();
                updateOrderSummary(subtotal);
            });
        });
    }
    
    // Setup payment method selection
    function setupPaymentMethods() {
        const paymentMethods = document.querySelectorAll('.payment-method');
        if (paymentMethods.length === 0) return;
        
        // Ensure at least one payment method is selected by default
        let hasSelected = false;
        paymentMethods.forEach(method => {
            if (method.classList.contains('selected')) {
                hasSelected = true;
            }
        });
        
        if (!hasSelected && paymentMethods.length > 0) {
            paymentMethods[0].classList.add('selected');
            const radio = paymentMethods[0].querySelector('.payment-radio');
            if (radio) radio.checked = true;
        }
        
        paymentMethods.forEach(method => {
            method.addEventListener('click', function() {
                // Remove selected class from all methods
                paymentMethods.forEach(m => m.classList.remove('selected'));
                // Add selected class to clicked method
                this.classList.add('selected');
                // Check the radio button
                const radio = this.querySelector('.payment-radio');
                if (radio) radio.checked = true;
            });
        });
    }
    
    // Setup quick view buttons
    function setupQuickViewButtons() {
        const quickViewButtons = document.querySelectorAll('.quick-view-btn');
        
        if (quickViewButtons.length > 0) {
            console.log('Found', quickViewButtons.length, 'quick view buttons');
            
            quickViewButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const productCard = this.closest('.product-card');
                    if (!productCard) return;
                    
                    const productId = productCard.getAttribute('data-id');
                    const titleElement = productCard.querySelector('.product-title');
                    const productName = titleElement ? titleElement.textContent : 'Product';
                    
                    const priceElement = productCard.querySelector('.product-price');
                    const priceAttr = priceElement ? priceElement.getAttribute('data-price') : null;
                    const productPrice = priceAttr ? parseFloat(priceAttr) : 0;
                    
                    const imageElement = productCard.querySelector('.product-image');
                    const productImage = imageElement ? imageElement.src : '';
                    
                    const productDescription = productCard.getAttribute('data-description') || 'No description available.';
                    
                    // Show quick view modal
                    if (window.Swal) {
                        Swal.fire({
                            title: productName,
                            html: `
                                <div class="quick-view-content">
                                    <div class="quick-view-image">
                                        <img src="${productImage}" alt="${productName}" style="max-width: 100%; height: auto;">
                                    </div>
                                    <div class="quick-view-details">
                                        <p class="quick-view-price">KES ${productPrice.toLocaleString()}</p>
                                        <p class="quick-view-description">${productDescription}</p>
                                        <div class="quick-view-quantity">
                                            <label>Quantity:</label>
                                            <input type="number" id="quickViewQuantity" value="1" min="1" max="10">
                                        </div>
                                    </div>
                                </div>
                            `,
                            showCancelButton: true,
                            confirmButtonText: 'Add to Cart',
                            cancelButtonText: 'Close',
                            width: '600px'
                        }).then((result) => {
                            if (result.isConfirmed) {
                                const quantityInput = document.getElementById('quickViewQuantity');
                                const quantity = quantityInput ? (parseInt(quantityInput.value) || 1) : 1;
                                addToCart(productId, productName, productPrice, productImage, quantity);
                            }
                        });
                    }
                });
            });
        } else {
            console.log('No quick view buttons found on page');
        }
    }
    
    // Test IndexedDB functionality
    function testIndexedDB() {
        return new Promise((resolve, reject) => {
            try {
                // Feature detection
                if (!window.indexedDB) {
                    console.error('IndexedDB is not supported in this browser');
                    resolve(false);
                    return;
                }
                
                // Test opening a connection
                const request = indexedDB.open('__test_db__', 1);
                
                request.onerror = event => {
                    console.error('IndexedDB test failed:', event.target.error);
                    resolve(false);
                };
                
                request.onupgradeneeded = event => {
                    const db = event.target.result;
                    const store = db.createObjectStore('test', { keyPath: 'id' });
                };
                
                request.onsuccess = event => {
                    const db = event.target.result;
                    
                    // Test writing and reading
                    const transaction = db.transaction('test', 'readwrite');
                    const store = transaction.objectStore('test');
                    
                    // Add test data
                    const testItem = { id: 'test', value: 'test_value' };
                    const addRequest = store.put(testItem);
                    
                    addRequest.onsuccess = () => {
                        // Read test data
                        const getRequest = store.get('test');
                        
                        getRequest.onsuccess = () => {
                            const result = getRequest.result;
                            
                            // Close and delete test database
                            db.close();
                            indexedDB.deleteDatabase('__test_db__');
                            
                            if (result && result.id === 'test' && result.value === 'test_value') {
                                console.log('IndexedDB test passed successfully');
                                resolve(true);
                            } else {
                                console.error('IndexedDB test failed: data mismatch');
                                resolve(false);
                            }
                        };
                        
                        getRequest.onerror = event => {
                            console.error('IndexedDB test read failed:', event.target.error);
                            resolve(false);
                        };
                    };
                    
                    addRequest.onerror = event => {
                        console.error('IndexedDB test write failed:', event.target.error);
                        resolve(false);
                    };
                };
            } catch (error) {
                console.error('IndexedDB test error:', error);
                resolve(false);
            }
        });
    }
    
    // Load SweetAlert library dynamically if not already loaded
    function loadSweetAlert(callback) {
        if (window.Swal) {
            callback();
            return;
        }
        
        const sweetAlertCSS = document.createElement('link');
        sweetAlertCSS.rel = 'stylesheet';
        sweetAlertCSS.href = 'https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css';
        document.head.appendChild(sweetAlertCSS);
        
        const sweetAlertScript = document.createElement('script');
        sweetAlertScript.src = 'https://cdn.jsdelivr.net/npm/sweetalert2@11';
        sweetAlertScript.onload = function() {
            console.log('SweetAlert loaded successfully');
            callback();
        };
        sweetAlertScript.onerror = function() {
            console.error('Failed to load SweetAlert');
            callback(); // Continue anyway
        };
        document.head.appendChild(sweetAlertScript);
    }
    
    // Checkout form validation
    function setupCheckoutFormValidation() {
        const checkoutForm = document.getElementById('checkoutForm');
        if (!checkoutForm) return;
        
        checkoutForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('customerName');
            const email = document.getElementById('customerEmail');
            const phone = document.getElementById('customerPhone');
            const address = document.getElementById('customerAddress');
            
            let isValid = true;
            
            // Simple validation
            if (!name || !name.value.trim()) {
                isValid = false;
                highlightInvalidField(name, 'Please enter your name');
            }
            
            if (!email || !email.value.trim() || !email.value.includes('@')) {
                isValid = false;
                highlightInvalidField(email, 'Please enter a valid email');
            }
            
            if (!phone || !phone.value.trim()) {
                isValid = false;
                highlightInvalidField(phone, 'Please enter your phone number');
            }
            
            if (!address || !address.value.trim()) {
                isValid = false;
                highlightInvalidField(address, 'Please enter your address');
            }
            
            // Get cart data
            const cartItems = await getCartItems();
            if (!cartItems || cartItems.length === 0) {
                if (window.Swal) {
                    Swal.fire({
                        title: 'Empty Cart',
                        text: 'Your cart is empty. Please add items before checkout.',
                        icon: 'error'
                    });
                } else {
                    alert('Your cart is empty. Please add items before checkout.');
                }
                return;
            }
            
            // If form is valid, proceed with checkout
            if (isValid) {
                // For demo purposes, show success message
                if (window.Swal) {
                    Swal.fire({
                        title: 'Order Placed!',
                        text: 'Your order has been successfully placed.',
                        icon: 'success',
                        confirmButtonText: 'OK'
                    }).then(() => {
                        // Clear cart
                        clearCart().then(() => {
                            // Redirect to homepage or order confirmation page
                            window.location.href = 'index.html';
                        });
                    });
                } else {
                    alert('Your order has been successfully placed.');
                    await clearCart();
                    window.location.href = 'index.html';
                }
            }
        });
        
        function highlightInvalidField(field, message) {
            if (!field) return;
            
            field.classList.add('invalid');
            
            const errorMessage = document.createElement('div');
            errorMessage.className = 'error-message';
            errorMessage.textContent = message;
            
            const existingError = field.parentNode.querySelector('.error-message');
            if (existingError) {
                field.parentNode.removeChild(existingError);
            }
            
            field.parentNode.appendChild(errorMessage);
            
            field.addEventListener('input', function() {
                this.classList.remove('invalid');
                const error = this.parentNode.querySelector('.error-message');
                if (error) {
                    this.parentNode.removeChild(error);
                }
            });
        }
    }
    
    // Initialize cart functionality on all pages
    async function initCart() {
        console.log('Initializing cart functionality');
        
        try {
            // Test IndexedDB
            const dbAvailable = await testIndexedDB();
            if (!dbAvailable) {
                console.error('IndexedDB is not available or not working correctly');
                if (window.Swal) {
                    Swal.fire({
                        title: 'Storage Error',
                        text: 'Your browser database storage is not available. Please enable IndexedDB for this website.',
                        icon: 'error'
                    });
                } else {
                    alert('Your browser database storage is not available. Please enable IndexedDB for this website.');
                }
                return;
            }
            
            // Initialize database
            await initDatabase();
            
            // Display cart count
            await updateCartCount();
            
            // Setup UI features based on current page
            const isCartPage = document.getElementById('cartItemsContainer') !== null;
           const isShopPage = document.querySelectorAll('.product-card').length > 0;
            const isCheckoutPage = document.getElementById('checkoutForm') !== null;
            
            if (isCartPage) {
                console.log('On cart page, displaying cart items');
                await displayCartItems();
                setupDeliveryOptions();
                setupPaymentMethods();
            }
            
            if (isShopPage || document.querySelector('.add-to-cart-btn')) {
                console.log('On shop page or page with products, setting up add to cart buttons');
                setupAddToCartButtons();
                setupQuickViewButtons();
            }
            
            if (isCheckoutPage) {
                console.log('On checkout page, setting up form validation');
                setupCheckoutFormValidation();
            }
            
        } catch (error) {
            console.error('Error initializing cart:', error);
        }
    }
    
    // Clear cart button
    const clearCartButton = document.getElementById('clearCartButton');
    if (clearCartButton) {
        clearCartButton.addEventListener('click', async function() {
            if (window.Swal) {
                Swal.fire({
                    title: 'Clear Cart?',
                    text: 'Are you sure you want to remove all items from your cart?',
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: 'Yes, clear it',
                    cancelButtonText: 'No, keep my items'
                }).then((result) => {
                    if (result.isConfirmed) {
                        clearCart().then(() => {
                            displayCartItems();
                            updateCartCount();
                            
                            Swal.fire(
                                'Cart Cleared',
                                'Your cart has been emptied.',
                                'success'
                            );
                        });
                    }
                });
            } else {
                if (confirm('Are you sure you want to remove all items from your cart?')) {
                    await clearCart();
                    displayCartItems();
                    updateCartCount();
                    alert('Your cart has been emptied.');
                }
            }
        });
    }
    
    // Search functionality
    const searchForm = document.getElementById('searchForm');
    const searchInput = document.getElementById('searchInput');
    
    if (searchForm && searchInput) {
        searchForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const searchTerm = searchInput.value.trim().toLowerCase();
            if (!searchTerm) return;
            
            // If on shop page, filter products immediately
            const productCards = document.querySelectorAll('.product-card');
            if (productCards.length > 0) {
                filterProducts(searchTerm);
            } else {
                // Otherwise, redirect to shop page with search parameter
                window.location.href = `shop.html?search=${encodeURIComponent(searchTerm)}`;
            }
        });
    }
    
    // Filter products based on search term
    function filterProducts(searchTerm) {
        const productCards = document.querySelectorAll('.product-card');
        const noResultsMessage = document.getElementById('noResultsMessage') || 
            document.createElement('div');
        
        if (!document.getElementById('noResultsMessage')) {
            noResultsMessage.id = 'noResultsMessage';
            noResultsMessage.className = 'no-results';
            noResultsMessage.textContent = 'No products match your search.';
            noResultsMessage.style.display = 'none';
            document.querySelector('.products-container').appendChild(noResultsMessage);
        }
        
        let matchFound = false;
        
        productCards.forEach(card => {
            const title = card.querySelector('.product-title').textContent.toLowerCase();
            const description = card.getAttribute('data-description')?.toLowerCase() || '';
            
            if (title.includes(searchTerm) || description.includes(searchTerm)) {
                card.style.display = 'flex';
                matchFound = true;
            } else {
                card.style.display = 'none';
            }
        });
        
        noResultsMessage.style.display = matchFound ? 'none' : 'block';
    }
    
    // Check for search parameters on load
    function checkSearchParams() {
        const urlParams = new URLSearchParams(window.location.search);
        const searchTerm = urlParams.get('search');
        
        if (searchTerm) {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.value = searchTerm;
            }
            
            filterProducts(searchTerm.toLowerCase());
        }
    }
    
    // Newsletter subscription
    const newsletterForm = document.getElementById('newsletterForm');
    if (newsletterForm) {
        newsletterForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const emailInput = this.querySelector('input[type="email"]');
            if (!emailInput || !emailInput.value.trim()) return;
            
            const email = emailInput.value.trim();
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                if (window.Swal) {
                    Swal.fire({
                        title: 'Invalid Email',
                        text: 'Please enter a valid email address.',
                        icon: 'error'
                    });
                } else {
                    alert('Please enter a valid email address.');
                }
                return;
            }
            
            // For demo purposes, just show success message
            if (window.Swal) {
                Swal.fire({
                    title: 'Subscribed!',
                    text: 'You have successfully subscribed to our newsletter.',
                    icon: 'success'
                });
            } else {
                alert('You have successfully subscribed to our newsletter.');
            }
            
            emailInput.value = '';
        });
    }
    
    // Product filtering by category
    const categoryFilters = document.querySelectorAll('.category-filter');
    if (categoryFilters.length > 0) {
        categoryFilters.forEach(filter => {
            filter.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all filters
                categoryFilters.forEach(f => f.classList.remove('active'));
                
                // Add active class to clicked filter
                this.classList.add('active');
                
                const category = this.getAttribute('data-category');
                
                // Filter products by category
                const productCards = document.querySelectorAll('.product-card');
                let matchFound = false;
                
                productCards.forEach(card => {
                    const productCategory = card.getAttribute('data-category');
                    
                    if (category === 'all' || productCategory === category) {
                        card.style.display = 'flex';
                        matchFound = true;
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                // Show no results message if needed
                const noResultsMessage = document.getElementById('noResultsMessage') || 
                    document.createElement('div');
                
                if (!document.getElementById('noResultsMessage')) {
                    noResultsMessage.id = 'noResultsMessage';
                    noResultsMessage.className = 'no-results';
                    noResultsMessage.textContent = 'No products in this category.';
                    noResultsMessage.style.display = 'none';
                    document.querySelector('.products-container').appendChild(noResultsMessage);
                }
                
                noResultsMessage.style.display = matchFound ? 'none' : 'block';
            });
        });
    }
    
    // Product sorting
    const sortSelect = document.getElementById('productSort');
    if (sortSelect) {
        sortSelect.addEventListener('change', function() {
            const sortBy = this.value;
            const productsContainer = document.querySelector('.products-container');
            const productCards = Array.from(document.querySelectorAll('.product-card'));
            
            if (!productsContainer || productCards.length === 0) return;
            
            productCards.sort((a, b) => {
                const aPrice = parseFloat(a.querySelector('.product-price').getAttribute('data-price'));
                const bPrice = parseFloat(b.querySelector('.product-price').getAttribute('data-price'));
                const aName = a.querySelector('.product-title').textContent;
                const bName = b.querySelector('.product-title').textContent;
                
                switch (sortBy) {
                    case 'price-low':
                        return aPrice - bPrice;
                    case 'price-high':
                        return bPrice - aPrice;
                    case 'name-asc':
                        return aName.localeCompare(bName);
                    case 'name-desc':
                        return bName.localeCompare(aName);
                    default:
                        return 0;
                }
            });
            
            // Remove existing products
            while (productsContainer.firstChild) {
                productsContainer.removeChild(productsContainer.firstChild);
            }
            
            // Add sorted products
            productCards.forEach(card => {
                productsContainer.appendChild(card);
            });
        });
    }
    
    // Initialize cart on DOM loaded
    loadSweetAlert(() => {
        initCart();
        checkSearchParams();
    });
});
    </script>
</body>
</html>

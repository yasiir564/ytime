<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - YTime Luxury</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        :root {
            --primary-color: #000000;
            --secondary-color: #0a3d62;
            --accent-color: #d4af37;
            --light-color: #f5f5f5;
            --dark-color: #222;
            --gray-color: #eaeaea;
            --text-color: #333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: #f9f9f9;
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Navigation Styles */
        .navbar {
            background-color: var(--primary-color);
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .navbar-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo img {
            height: 40px;
            margin-right: 10px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background-color: white;
            margin: 3px 0;
            transition: 0.4s;
        }

        .nav-links {
            display: flex;
            list-style-type: none;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            margin: 0 15px;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-link:hover {
            color: var(--accent-color);
        }

        .nav-icons-container {
            display: flex;
            align-items: center;
        }

        .cart-icon {
            position: relative;
            margin-right: 20px;
            cursor: pointer;
        }

        .cart-icon i {
            color: white;
            font-size: 20px;
        }

        .cart-count {
            position: absolute;
            top: -10px;
            right: -10px;
            background-color: var(--accent-color);
            color: var(--primary-color);
            font-size: 12px;
            height: 18px;
            width: 18px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        .auth-button {
            background-color: var(--accent-color);
            color: var(--primary-color);
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .auth-button:hover {
            background-color: #c19b2a;
        }

        /* Checkout Styles */
        .checkout-section {
            padding: 40px 0;
        }

        .checkout-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 30px;
            text-align: center;
            color: var(--secondary-color);
        }

        .checkout-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .checkout-left, .checkout-right {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            padding: 25px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray-color);
            color: var(--secondary-color);
        }

        /* Cart Items */
        .cart-items {
            margin-bottom: 30px;
        }

        .cart-item {
            display: flex;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gray-color);
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            margin-right: 15px;
            border-radius: 4px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-price {
            font-weight: 700;
            color: var(--secondary-color);
        }

        .cart-item-quantity {
            color: #777;
            font-size: 14px;
        }

        .cart-item-remove {
            color: #e74c3c;
            cursor: pointer;
            margin-left: 10px;
            background: none;
            border: none;
            font-size: 16px;
        }

        /* Customer Info */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            transition: border 0.3s;
        }

        .form-input:focus {
            border-color: var(--secondary-color);
            outline: none;
        }

        /* Delivery Options */
        .delivery-options {
            margin-bottom: 30px;
        }

        .delivery-option {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .delivery-option:hover {
            border-color: var(--secondary-color);
        }

        .delivery-option.selected {
            border-color: var(--secondary-color);
            background-color: rgba(10, 61, 98, 0.05);
        }

        .delivery-radio {
            margin-right: 15px;
        }

        .delivery-details {
            flex: 1;
        }

        .delivery-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .delivery-description {
            font-size: 14px;
            color: #777;
        }

        .delivery-price {
            font-weight: 700;
            color: var(--secondary-color);
        }

        /* Auth Frame */
        .auth-frame-container {
            margin-bottom: 30px;
        }

        .auth-frame {
            width: 100%;
            height: 200px;
            border: none;
            background-color: var(--gray-color);
            border-radius: 4px;
        }

        /* Auth Alternatives */
        .auth-alternatives {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .auth-button-social {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #fff;
            border: 1px solid #ddd;
            padding: 12px;
            margin: 0 5px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .auth-button-social:hover {
            background-color: #f5f5f5;
        }

        .auth-button-social i {
            margin-right: 8px;
        }

        /* Agreement Section */
        .agreement {
            margin-bottom: 20px;
        }

        .agreement label {
            display: flex;
            align-items: center;
        }

        .agreement input {
            margin-right: 10px;
        }

        /* Order Summary */
        .order-summary {
            margin-top: 20px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .summary-total {
            font-size: 18px;
            font-weight: 700;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--gray-color);
        }

        /* Payment Methods */
        .payment-methods {
            margin-top: 30px;
        }

        .payment-method {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method:hover {
            border-color: var(--secondary-color);
        }

        .payment-method.selected {
            border-color: var(--secondary-color);
            background-color: rgba(10, 61, 98, 0.05);
        }

        .payment-radio {
            margin-right: 15px;
        }

        .payment-details {
            flex: 1;
        }

        .payment-title {
            font-weight: 600;
            display: flex;
            align-items: center;
        }

        .payment-title i {
            margin-right: 8px;
        }

        .payment-description {
            font-size: 14px;
            color: #777;
            margin-top: 5px;
        }

        /* Checkout Button */
        .checkout-button {
            width: 100%;
            background-color: var(--accent-color);
            color: var(--primary-color);
            border: none;
            padding: 15px;
            font-size: 18px;
            font-weight: 700;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .checkout-button:hover {
            background-color: #c19b2a;
        }

        .checkout-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        /* Empty Cart */
        .empty-cart {
            text-align: center;
            padding: 60px 0;
        }

        .empty-cart i {
            font-size: 50px;
            color: #ddd;
            margin-bottom: 20px;
        }

        .empty-cart h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: var(--secondary-color);
        }

        .empty-cart p {
            margin-bottom: 30px;
            color: #777;
        }

        .continue-shopping {
            background-color: var(--secondary-color);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            text-decoration: none;
        }

        .continue-shopping:hover {
            background-color: #0c2a40;
        }

        /* Footer Styles */
        .footer {
            background-color: var(--primary-color);
            color: white;
            padding: 60px 0 20px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .footer-logo img {
            height: 40px;
            margin-right: 10px;
        }

        .footer-about {
            margin-bottom: 20px;
            line-height: 1.8;
            font-size: 14px;
        }

        .footer-social {
            display: flex;
            gap: 15px;
        }

        .social-icon {
            width: 36px;
            height: 36px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s;
        }

        .social-icon:hover {
            background-color: var(--accent-color);
            color: var(--primary-color);
        }

        .footer-heading {
            font-size: 18px;
            font-weight: 600;
            margin-bottom:
            20px;
            position: relative;
        }

        .footer-heading::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -10px;
            width: 40px;
            height: 2px;
            background-color: var(--accent-color);
        }

        .footer-links {
            list-style-type: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: var(--accent-color);
        }

        .footer-contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .footer-contact-item i {
            width: 25px;
            color: var(--accent-color);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
        }

        /* Media Queries */
        @media (max-width: 992px) {
            .checkout-container {
                grid-template-columns: 1fr;
            }

            .footer-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }

            .nav-links {
                position: absolute;
                flex-direction: column;
                background-color: var(--primary-color);
                width: 100%;
                top: 70px;
                left: 0;
                padding: 20px 0;
                transform: translateY(-150%);
                transition: transform 0.3s;
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
            }

            .nav-links.active {
                transform: translateY(0);
            }

            .nav-links li {
                margin: 10px 0;
            }

            .nav-link {
                margin: 0;
                padding: 10px 20px;
                display: block;
            }

            .footer-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container navbar-container">
            <div class="logo">
                <img src="ytime_luxury-removebg-preview.png" alt="YTime Logo">
                <span class="logo-text">YTime</span>
            </div>

            <div class="hamburger">
                <span></span>
                <span></span>
            </div>

            <ul class="nav-links">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="shop.html" class="nav-link">Collection</a></li>
                <li><a href="service.html" class="nav-link">Services</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>

            <div class="nav-icons-container">
                <div class="cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </div>
                <div class="nav-auth-container">
                    <button id="authButton" class="auth-button">Sign In</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Checkout Section -->
    <section class="checkout-section">
        <div class="container">
            <h1 class="checkout-title">Checkout</h1>
            
            <div id="emptyCartMessage" class="empty-cart" style="display: none;">
                <i class="fas fa-shopping-cart"></i>
                <h3>Your cart is empty</h3>
                <p>Looks like you haven't added any watches to your cart yet.</p>
                <a href="shop.html" class="continue-shopping">Continue Shopping</a>
            </div>

            <div id="checkoutContainer" class="checkout-container">
                <div class="checkout-left">
                    <div class="cart-items">
                        <h2 class="section-title">Your Cart</h2>
                        <div id="cartItemsContainer">
                            <!-- Cart items will be populated here -->
                        </div>
                    </div>

                    <div class="customer-info">
                        <h2 class="section-title">Personal Information</h2>
                        <div class="form-group">
                            <label for="fullName" class="form-label">Full Name</label>
                            <input type="text" id="fullName" class="form-input" placeholder="Enter your full name" required>
                        </div>
                        <div class="form-group">
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" id="email" class="form-input" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone" class="form-label">Mobile Number</label>
                            <input type="tel" id="phone" class="form-input" placeholder="Enter your mobile number" required>
                        </div>
                    </div>

                    <div class="delivery-options">
                        <h2 class="section-title">Delivery Options</h2>
                        <div class="delivery-option selected" data-fee="0" data-location="nairobi">
                            <input type="radio" name="delivery" id="nairobi" class="delivery-radio" checked>
                            <div class="delivery-details">
                                <div class="delivery-title">Nairobi County</div>
                                <div class="delivery-description">Free delivery within Nairobi</div>
                            </div>
                            <div class="delivery-price">Free</div>
                        </div>
                        <div class="delivery-option" data-fee="300" data-location="kenya">
                            <input type="radio" name="delivery" id="kenya" class="delivery-radio">
                            <div class="delivery-details">
                                <div class="delivery-title">Other Counties in Kenya</div>
                                <div class="delivery-description">Delivery to any other county in Kenya</div>
                            </div>
                            <div class="delivery-price">KES 300</div>
                        </div>
                        <div class="delivery-option" data-fee="1000" data-location="eastafrica">
                            <input type="radio" name="delivery" id="eastafrica" class="delivery-radio">
                            <div class="delivery-details">
                                <div class="delivery-title">East Africa Countries</div>
                                <div class="delivery-description">Delivery to Tanzania, Uganda, Rwanda, Burundi</div>
                            </div>
                            <div class="delivery-price">KES 1,000</div>
                        </div>
                    </div>

                    <div class="auth-frame-container">
                        <h2 class="section-title">Login Information</h2>
                        <div class="auth-alternatives">
                            <button class="auth-button-social">
                                <i class="fab fa-google"></i> Login with Google
                            </button>
                            <button class="auth-button-social">
                                <i class="fab fa-apple"></i> Login with Apple
                            </button>
                        </div>
                        <!-- Uncomment this to use iframe for login
                        <iframe src="login.html" class="auth-frame" title="Login Frame"></iframe>
                        -->
                    </div>

                    <div class="agreement">
                        <label>
                            <input type="checkbox" id="termsAgreement">
                            I agree to the <a href="#">Terms & Conditions</a> and <a href="#">Privacy Policy</a>
                        </label>
                    </div>
                </div>

                <div class="checkout-right">
                    <div class="order-summary">
                        <h2 class="section-title">Order Summary</h2>
                        <div class="summary-row">
                            <span>Subtotal</span>
                            <span id="subtotal">KES 0</span>
                        </div>
                        <div class="summary-row">
                            <span>Shipping</span>
                            <span id="shipping">KES 0</span>
                        </div>
                        <div class="summary-total">
                            <span>Total</span>
                            <span id="orderTotal">KES 0</span>
                        </div>
                    </div>

                    <div class="payment-methods">
                        <h2 class="section-title">Payment Method</h2>
                        <div class="payment-method selected" data-method="mpesa">
                            <input type="radio" name="payment" id="mpesa" class="payment-radio" checked>
                            <div class="payment-details">
                                <div class="payment-title"><i class="fas fa-mobile-alt"></i> M-Pesa STK Push</div>
                                <div class="payment-description">Pay using M-Pesa STK Push (Coming Soon)</div>
                            </div>
                        </div>
                        <div class="payment-method" data-method="whatsapp">
                            <input type="radio" name="payment" id="whatsapp" class="payment-radio">
                            <div class="payment-details">
                                <div class="payment-title"><i class="fab fa-whatsapp"></i> WhatsApp</div>
                                <div class="payment-description">Continue on WhatsApp to complete your purchase</div>
                            </div>
                        </div>
                    </div>

                    <button id="checkoutButton" class="checkout-button" disabled>Complete Purchase</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" id="contact">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <div class="footer-logo">
                        <img src="ytime_luxury-removebg-preview.png" alt="YTime Logo">
                        <span class="logo-text">YTime</span>
                    </div>
                    <p class="footer-about">
                        YTime is a premier destination for luxury timepieces, offering a curated selection of the world's finest watches and exceptional customer service.
                    </p>
                    <div class="footer-social">
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>

                <div>
                    <h3 class="footer-heading">Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#collection">Collection</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="footer-heading">Help & Support</h3>
                    <ul class="footer-links">
                        <li><a href="#">FAQs</a></li>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Returns Policy</a></li>
                        <li><a href="#">Warranty</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="footer-heading">Contact Us</h3>
                    <div class="footer-contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Nairobi Kenya</span>
                    </div>
                    <div class="footer-contact-item">
                        <i class="fas fa-phone"></i>
                        <span>+254117278821</span>
                    </div>
                    <div class="footer-contact-item">
                        <i class="fas fa-envelope"></i>
                        <span>info@ytime.co.ke</span>
                    </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 YTime Luxury. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Mobile navigation toggle
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');
    
    if (hamburger && navLinks) {
        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });
    }
    
    // Get cart data from localStorage
    function getCartItems() {
        const cartItems = localStorage.getItem('cartItems');
        return cartItems ? JSON.parse(cartItems) : [];
    }
    
    // Add to cart function (for index.html and shop.html)
    function setupAddToCartButtons() {
        const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
        
        if (addToCartButtons.length > 0) {
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const productCard = this.closest('.product-card');
                    const productId = productCard.getAttribute('data-id');
                    const productName = productCard.querySelector('.product-title').textContent;
                    const productPrice = parseFloat(productCard.querySelector('.product-price').getAttribute('data-price'));
                    const productImage = productCard.querySelector('.product-image').src;
                    
                    addToCart(productId, productName, productPrice, productImage);
                });
            });
        }
    }
    
    // Add item to cart
    function addToCart(id, name, price, image, quantity = 1) {
        const cartItems = getCartItems();
        const existingItemIndex = cartItems.findIndex(item => item.id === id);
        
        if (existingItemIndex > -1) {
            cartItems[existingItemIndex].quantity += quantity;
        } else {
            cartItems.push({
                id,
                name,
                price,
                image,
                quantity
            });
        }
        
        localStorage.setItem('cartItems', JSON.stringify(cartItems));
        updateCartCount();
        
        // Show SweetAlert notification
        Swal.fire({
            title: 'Added to Cart!',
            text: `${name} has been added to your cart.`,
            icon: 'success',
            timer: 2000,
            timerProgressBar: true,
            showConfirmButton: false
        });
    }
    
    // Update cart count in navigation
    function updateCartCount() {
        const cartCountElements = document.querySelectorAll('.cart-count');
        const cartItems = getCartItems();
        const itemCount = cartItems.length;
        
        cartCountElements.forEach(element => {
            element.textContent = itemCount;
        });
    }
    
    // Display cart items on cart page
    function displayCartItems() {
        const cartItemsContainer = document.getElementById('cartItemsContainer');
        if (!cartItemsContainer) return; // Not on cart page
        
        const cartItems = getCartItems();
        const cartCountElement = document.querySelector('.cart-count');
        const emptyCartMessage = document.getElementById('emptyCartMessage');
        const checkoutContainer = document.getElementById('checkoutContainer');
        
        if (cartItems.length === 0) {
            if (emptyCartMessage) emptyCartMessage.style.display = 'block';
            if (checkoutContainer) checkoutContainer.style.display = 'none';
            if (cartCountElement) cartCountElement.textContent = '0';
            return;
        }
        
        if (cartCountElement) cartCountElement.textContent = cartItems.length;
        if (emptyCartMessage) emptyCartMessage.style.display = 'none';
        if (checkoutContainer) checkoutContainer.style.display = 'block';
        
        let cartItemsHTML = '';
        let subtotal = 0;
        
        cartItems.forEach((item, index) => {
            const itemTotal = item.price * item.quantity;
            subtotal += itemTotal;
            
            cartItemsHTML += `
                <div class="cart-item" data-id="${item.id}">
                    <img src="${item.image || '/api/placeholder/80/80'}" alt="${item.name}" class="cart-item-image">
                    <div class="cart-item-details">
                        <h3 class="cart-item-title">${item.name}</h3>
                        <div class="cart-item-price">KES ${item.price.toLocaleString()}</div>
                        <div class="cart-item-controls">
                            <button class="quantity-btn decrease" data-index="${index}">-</button>
                            <span class="cart-item-quantity">${item.quantity}</span>
                            <button class="quantity-btn increase" data-index="${index}">+</button>
                        </div>
                        <div class="cart-item-total">Total: KES ${itemTotal.toLocaleString()}</div>
                    </div>
                    <button class="cart-item-remove" data-index="${index}">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
        });
        
        cartItemsContainer.innerHTML = cartItemsHTML;
        
        // Update order summary
        updateOrderSummary(subtotal);
        
        // Add event listeners to remove buttons
        const removeButtons = document.querySelectorAll('.cart-item-remove');
        removeButtons.forEach(button => {
            button.addEventListener('click', function() {
                const index = parseInt(this.getAttribute('data-index'));
                removeCartItem(index);
            });
        });
        
        // Add event listeners to quantity buttons
        const decreaseButtons = document.querySelectorAll('.quantity-btn.decrease');
        const increaseButtons = document.querySelectorAll('.quantity-btn.increase');
        
        decreaseButtons.forEach(button => {
            button.addEventListener('click', function() {
                const index = parseInt(this.getAttribute('data-index'));
                updateItemQuantity(index, -1);
            });
        });
        
        increaseButtons.forEach(button => {
            button.addEventListener('click', function() {
                const index = parseInt(this.getAttribute('data-index'));
                updateItemQuantity(index, 1);
            });
        });
    }
    
    // Update item quantity
    function updateItemQuantity(index, change) {
        const cartItems = getCartItems();
        if (!cartItems[index]) return;
        
        cartItems[index].quantity += change;
        
        if (cartItems[index].quantity < 1) {
            // Ask for confirmation before removing
            Swal.fire({
                title: 'Remove Item?',
                text: `Do you want to remove ${cartItems[index].name} from your cart?`,
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Yes, remove it',
                cancelButtonText: 'No, keep it'
            }).then((result) => {
                if (result.isConfirmed) {
                    removeCartItem(index);
                } else {
                    cartItems[index].quantity = 1;
                    localStorage.setItem('cartItems', JSON.stringify(cartItems));
                    displayCartItems();
                }
            });
        } else {
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            displayCartItems();
        }
    }
    
    // Remove item from cart
    function removeCartItem(index) {
        const cartItems = getCartItems();
        const removedItem = cartItems[index];
        
        cartItems.splice(index, 1);
        localStorage.setItem('cartItems', JSON.stringify(cartItems));
        displayCartItems();
        updateCartCount();
        
        // Show SweetAlert notification
        Swal.fire({
            title: 'Item Removed',
            text: `${removedItem.name} has been removed from your cart.`,
            icon: 'info',
            timer: 2000,
            timerProgressBar: true,
            showConfirmButton: false
        });
    }
    
    // Update order summary
    function updateOrderSummary(subtotal) {
        const subtotalElement = document.getElementById('subtotal');
        const shippingElement = document.getElementById('shipping');
        const orderTotalElement = document.getElementById('orderTotal');
        
        if (!subtotalElement || !shippingElement || !orderTotalElement) return;
        
        const selectedDelivery = document.querySelector('.delivery-option.selected');
        if (!selectedDelivery) return;
        
        const shippingFee = parseInt(selectedDelivery.getAttribute('data-fee')) || 0;
        
        subtotalElement.textContent = `KES ${subtotal.toLocaleString()}`;
        shippingElement.textContent = shippingFee === 0 ? 'Free' : `KES ${shippingFee.toLocaleString()}`;
        orderTotalElement.textContent = `KES ${(subtotal + shippingFee).toLocaleString()}`;
    }
    
    // Calculate subtotal
    function calculateSubtotal() {
        const cartItems = getCartItems();
        return cartItems.reduce((total, item) => total + (item.price * item.quantity), 0);
    }
    
    // Setup delivery option selection
    function setupDeliveryOptions() {
        const deliveryOptions = document.querySelectorAll('.delivery-option');
        if (deliveryOptions.length === 0) return;
        
        deliveryOptions.forEach(option => {
            option.addEventListener('click', function() {
                // Remove selected class from all options
                deliveryOptions.forEach(opt => opt.classList.remove('selected'));
                // Add selected class to clicked option
                this.classList.add('selected');
                // Check the radio button
                const radio = this.querySelector('.delivery-radio');
                if (radio) radio.checked = true;
                // Update order summary
                const subtotal = calculateSubtotal();
                updateOrderSummary(subtotal);
            });
        });
    }
    
    // Setup payment method selection
    function setupPaymentMethods() {
        const paymentMethods = document.querySelectorAll('.payment-method');
        if (paymentMethods.length === 0) return;
        
        paymentMethods.forEach(method => {
            method.addEventListener('click', function() {
                // Remove selected class from all methods
                paymentMethods.forEach(m => m.classList.remove('selected'));
                // Add selected class to clicked method
                this.classList.add('selected');
                // Check the radio button
                const radio = this.querySelector('.payment-radio');
                if (radio) radio.checked = true;
            });
        });
    }
    
    // Validate form
    function validateForm() {
        const fullName = document.getElementById('fullName')?.value.trim();
        const email = document.getElementById('email')?.value.trim();
        const phone = document.getElementById('phone')?.value.trim();
        const termsAgreement = document.getElementById('termsAgreement')?.checked;
        
        if (fullName === undefined || email === undefined || phone === undefined || termsAgreement === undefined) {
            return false;
        }
        
        // Validate phone format for Kenya
        const phoneRegex = /^(07|01|2547|2541)\d{8}$/;
        const isPhoneValid = phoneRegex.test(phone.replace(/\s+/g, ''));
        
        // Validate email format
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        const isEmailValid = emailRegex.test(email);
        
        return fullName !== '' && isEmailValid && isPhoneValid && termsAgreement;
    }
    
    // Show field validation errors
    function showValidationErrors() {
        const fullName = document.getElementById('fullName')?.value.trim();
        const email = document.getElementById('email')?.value.trim();
        const phone = document.getElementById('phone')?.value.trim();
        const termsAgreement = document.getElementById('termsAgreement')?.checked;
        
        let errorMessages = [];
        
        if (!fullName) {
            errorMessages.push('Please enter your full name');
        }
        
        if (!email) {
            errorMessages.push('Please enter your email address');
        } else {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                errorMessages.push('Please enter a valid email address');
            }
        }
        
        if (!phone) {
            errorMessages.push('Please enter your phone number');
        } else {
            const phoneRegex = /^(07|01|2547|2541)\d{8}$/;
            if (!phoneRegex.test(phone.replace(/\s+/g, ''))) {
                errorMessages.push('Please enter a valid Kenyan phone number');
            }
        }
        
        if (!termsAgreement) {
            errorMessages.push('Please agree to the terms and conditions');
        }
        
        return errorMessages;
    }
    
    // Enable/disable checkout button based on validation
    function updateCheckoutButton() {
        const checkoutButton = document.getElementById('checkoutButton');
        if (!checkoutButton) return;
        
        checkoutButton.disabled = !validateForm();
    }
    
    // Setup form validation
    function setupFormValidation() {
        const formInputs = document.querySelectorAll('.form-input, #termsAgreement');
        if (formInputs.length === 0) return;
        
        formInputs.forEach(input => {
            input.addEventListener('input', updateCheckoutButton);
        });
    }
    
    // Handle checkout process
    function setupCheckoutProcess() {
        const checkoutButton = document.getElementById('checkoutButton');
        if (!checkoutButton) return;
        
        checkoutButton.addEventListener('click', function() {
            if (!validateForm()) {
                const errorMessages = showValidationErrors();
                Swal.fire({
                    title: 'Form Validation Error',
                    html: errorMessages.join('<br>'),
                    icon: 'error'
                });
                return;
            }
            
            const selectedPayment = document.querySelector('.payment-method.selected');
            if (!selectedPayment) {
                Swal.fire({
                    title: 'Payment Method Required',
                    text: 'Please select a payment method to continue.',
                    icon: 'warning'
                });
                return;
            }
            
            const paymentMethod = selectedPayment.getAttribute('data-method');
            
            if (paymentMethod === 'mpesa') {
                Swal.fire({
                    title: 'M-Pesa Coming Soon',
                    text: 'M-Pesa STK Push feature is coming soon. Please use WhatsApp payment option for now.',
                    icon: 'info'
                });
            } else if (paymentMethod === 'whatsapp') {
                // Prepare order information
                const fullName = document.getElementById('fullName').value.trim();
                const email = document.getElementById('email').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const selectedDelivery = document.querySelector('.delivery-option.selected');
                const deliveryLocation = selectedDelivery.getAttribute('data-location');
                const cartItems = getCartItems();
                const subtotal = calculateSubtotal();
                const shippingFee = parseInt(selectedDelivery.getAttribute('data-fee')) || 0;
                const total = subtotal + shippingFee;
                
                // Create WhatsApp message
                let message = `Hello YTime Luxury, I'd like to place an order.%0A%0A`;
                message += `*Customer Information*%0A`;
                message += `Name: ${fullName}%0A`;
                message += `Email: ${email}%0A`;
                message += `Phone: ${phone}%0A%0A`;
                
                message += `*Order Details*%0A`;
                cartItems.forEach((item, index) => {
                    message += `${index + 1}. ${item.name} - KES ${item.price.toLocaleString()} x ${item.quantity}%0A`;
                });
                
                message += `%0ADelivery: ${deliveryLocation.charAt(0).toUpperCase() + deliveryLocation.slice(1)}%0A`;
                message += `Shipping Fee: ${shippingFee === 0 ? 'Free' : `KES ${shippingFee.toLocaleString()}`}%0A`;
                message += `Subtotal: KES ${subtotal.toLocaleString()}%0A`;
                message += `Total: KES ${total.toLocaleString()}%0A%0A`;
                
                message += `I would like to complete my purchase. Thank you!`;
                
                // Show confirmation before redirecting
                Swal.fire({
                    title: 'Proceed to WhatsApp?',
                    text: 'You will be redirected to WhatsApp to complete your order.',
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonText: 'Yes, proceed',
                    cancelButtonText: 'Cancel'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Redirect to WhatsApp
                        window.location.href = `https://wa.me/254117278821?text=${message}`;
                        
                        // Clear cart after successful checkout
                        localStorage.removeItem('cartItems');
                    }
                });
            }
        });
    }
    
    // Quick view product (for shop.html)
    function setupQuickViewButtons() {
        const quickViewButtons = document.querySelectorAll('.quick-view-btn');
        
        if (quickViewButtons.length > 0) {
            quickViewButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const productCard = this.closest('.product-card');
                    const productId = productCard.getAttribute('data-id');
                    const productName = productCard.querySelector('.product-title').textContent;
                    const productPrice = parseFloat(productCard.querySelector('.product-price').getAttribute('data-price'));
                    const productImage = productCard.querySelector('.product-image').src;
                    const productDescription = productCard.getAttribute('data-description') || 'No description available.';
                    
                    // Show quick view modal
                    Swal.fire({
                        title: productName,
                        html: `
                            <div class="quick-view-content">
                                <div class="quick-view-image">
                                    <img src="${productImage}" alt="${productName}" style="max-width: 100%; height: auto;">
                                </div>
                                <div class="quick-view-details">
                                    <p class="quick-view-price">KES ${productPrice.toLocaleString()}</p>
                                    <p class="quick-view-description">${productDescription}</p>
                                    <div class="quick-view-quantity">
                                        <label>Quantity:</label>
                                        <input type="number" id="quickViewQuantity" value="1" min="1" max="10">
                                    </div>
                                </div>
                            </div>
                        `,
                        showCancelButton: true,
                        confirmButtonText: 'Add to Cart',
                        cancelButtonText: 'Close',
                        width: '600px'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            const quantity = parseInt(document.getElementById('quickViewQuantity').value) || 1;
                            addToCart(productId, productName, productPrice, productImage, quantity);
                        }
                    });
                });
            });
        }
    }
    
    // Initialize cart functionality on all pages
    function initCart() {
        updateCartCount();
        
        // Features specific to cart page
        if (document.getElementById('cartItemsContainer')) {
            displayCartItems();
            setupDeliveryOptions();
            setupPaymentMethods();
            setupFormValidation();
            setupCheckoutProcess();
        }
        
        // Features specific to shop and home pages
        setupAddToCartButtons();
        setupQuickViewButtons();
    }
    
    // Load SweetAlert library dynamically if not already loaded
    function loadSweetAlert(callback) {
        if (window.Swal) {
            callback();
            return;
        }
        
        const sweetAlertCSS = document.createElement('link');
        sweetAlertCSS.rel = 'stylesheet';
        sweetAlertCSS.href = 'https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css';
        document.head.appendChild(sweetAlertCSS);
        
        const sweetAlertScript = document.createElement('script');
        sweetAlertScript.src = 'https://cdn.jsdelivr.net/npm/sweetalert2@11';
        sweetAlertScript.onload = callback;
        document.head.appendChild(sweetAlertScript);
    }
    
    // Initialize everything
    loadSweetAlert(initCart);
});
    </script>
</body>
</html>
